program : PROGRAM variable SEMI block BANG

block : declarations compound_statement

declarations : (VAR (variable_declaration SEMI)+)*
                | (PROCEDURE ID (LPAREN formal_parameter_list RPAREN)? SEMI block SEMI)*
                | empty

variable_declarations : ID (COMMA ID)* COLON type_spec

type_spec: INTEGER | REAL

compound_statement : OPEN statement_list CLOSE

statement_list : statement
               | statement SEMI statement_list

statement : compound_statement
          | assignment_statement
          | empty

assignment_statement : variable ASSIGN expr

empty :

expr: term ((PLUS | MINUS) term)*

term: factor ((MULTIPLY | DIVIDE) factor)*

factor : PLUS factor
       | MINUS factor
       | INTEGER
       | LPAREN expr RPAREN
       | variable

variable: ID

ASSIGN : "="
BANG : "!"
CLOSE : "}"
DIVIDE : "/"
ID : "ID"
INTEGER : "INTEGER"
LPAREN : "("
MINUS : "-"
MULTIPLY : "*"
OPEN : "{"
PLUS : "+"
RPAREN : ")"
SEMI : ";"
